# Reference Design - Routed Campus

In most enterprise campus environments, there are a large number of IDFs ([IDF](https://www.its.bldrdoc.gov/fs-1037/dir-019/_2802.htm) = old telecom speak for what is today considered a data closet), which are typically located with 100 meters or so of end user computers/phones, and each IDF generally has a link back to an MDF ([MDF](https://www.its.bldrdoc.gov/fs-1037/dir-022/_3192.htm) = old telecom speak for what you would consider your "main" data closet or data center) via a large bandwidth transport (fiber, usually).

One challenge in today's campus environments is implementing redundant networks with a many-IDF to single-MDF or dual-MDF facility layout. A legacy approach to this problem/goal was to connect each access switch (located in the IDFs) to each of the core switches (located in the MDFs), put all SVIs/RVIs on the core switches, extend your end user VLANs to the access switches, and off to the races. Well...there are some problems with this approach.

> VLANs reduce the load on a network by dividing a LAN into smaller segments and keeping local traffic within a VLAN. However, because each VLAN has its own domain, a mechanism is needed for VLANs to pass data to other VLANs without passing the data through a router. The solution is to use logical routers, otherwise known as routed VLAN interfaces (RVIs). With RVIs, the switch recognizes packet destinations that are local to the sending VLAN and bridges (switches) those packets—with RVIs, only packets destined for another VLAN are routed. Whenever packets are switched instead of routed, several layers of processing are eliminated. Switching also reduces the number of address lookups.
-- <cite>[Juniper Networks](https://www.juniper.net/documentation/en_US/junos11.1/topics/concept/bridging-routed-vlan-interface.html)</cite>

Problems arise from the legacy campus design method when you start to consder redundancy. If you imagine a simple redundant layer 2 topology like this:

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="421px" viewBox="0 0 421 196" content="&lt;mxfile modified=&quot;2018-12-07T23:58:46.477Z&quot; host=&quot;www.draw.io&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_1) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/8.8.0 Chrome/61.0.3163.100 Electron/2.0.2 Safari/537.36&quot; etag=&quot;ZpAO6_sfmaaN29uTXXpF&quot; version=&quot;9.5.9&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;2UbHyQgh6Jzie4TEUn2E&quot; name=&quot;Page-1&quot;&gt;3VhNc9owEP01HNOxLUzMEUhIDu1MOhxSTh3FErYa2csIEaC/vjJefyHifNSEpuaA9CRZ6/f2eQU9Mkm2N4ou42/AuOx5Dtv2yFXP81zXdcxXhuwQcVw/RyIlGGIVMBO/eTER0bVgfNWYqAGkFssmGEKa8lA3MKoUbJrTFiCbuy5pxC1gFlJpo/eC6bh4MMepBm65iGLcOvBxIKHFZARWMWWwqUHkukcmCkDnrWQ74TJjr+AlXzd9ZrQMTPFUv2bB6GZ++TO93/kyCbm/ELeP3+lFH2PTu+KBFaxTxrM1To+MY51I03RNk2+F/pHBX3zszXHkF9d6h9LRtQYDgdIxRJBS+RVgWdwhZaNMEtNNIeU5MhVS4mYrreCxpNkrkQlIUPvoiOcMgyuyX6nVrhZO1p3jffJn4sxStqIKoRWsVchb+PEw5aiKuG6Z55aCGitwSLgJx6xTXFItnppxUEzJqJxXqWYaKNwbRBxYImbPPsMuUv2irm5N1YLUdr1eq7ulIhm7U298VPEzaEfOqZ3fiXa2J9v8cTJdp9PLwDnu5A51JZ/Bk3jfJyrXuJNgC/eChiFfrVpeuhmvm1hoPlvSPQsbU1iboi+MUjXSF372seRAZReQ6rrz9hfiRZYVsXKl+bZdHptOXNAfYiZjofcvsextGlUzx+Jawew7J1LAsxQIQXG3U+4n++vs3BeHEeS+X5yxzsY9Ocq99x9y7w//Ne6LzU55HHiQED426sZbzoHPn+rsunGg43R/dVtPgr+sE7j0DoTZuTJl0EwM3z0QPK9fuOpA8zKM96dBYFnwTomEYoLVs8Mkv27mwHFHNe1XakaliFKDhYZ4bgbHmZ+E+QU1woFEMJbtddTfzTfAc2p37VriH4jj2NVqcMS03slMa9eld50DP9C0LYe9DzDt8CSmHXjnNe3QMu2Mh5Cy7mxbqvYZbTsYvmzboBvbmm7110wub/UPF7n+Aw==&lt;/diagram&gt;&lt;/mxfile&gt;" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://www.draw.io/?client=1&amp;lightbox=1&amp;edit=_blank');}}})(this);" style="cursor:pointer;max-width:100%;max-height:196px;"><defs/><path d="M 105 40 L 200 155" fill="none" stroke="#2098d3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 160 20 L 240 20" fill="none" stroke="#3b1f2b" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 295 40 L 200 155" fill="none" stroke="#ff7800" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><rect x="145" y="155" width="110" height="40" rx="6" ry="6" fill="#f5f5f5" stroke="none" pointer-events="none"/><g transform="translate(166.5,168.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="66" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; vertical-align: top; width: 66px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">idf1-access</div></div></foreignObject><text x="33" y="12" fill="#333333" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">idf1-access</text></switch></g><rect x="50" y="0" width="110" height="40" rx="6" ry="6" fill="#cccccc" stroke="none" pointer-events="none"/><g transform="translate(88.5,13.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="32" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; vertical-align: top; width: 34px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">core1</div></div></foreignObject><text x="16" y="12" fill="#333333" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">core1</text></switch></g><rect x="240" y="0" width="110" height="40" rx="6" ry="6" fill="#cccccc" stroke="none" pointer-events="none"/><g transform="translate(278.5,13.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="32" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; vertical-align: top; width: 34px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">core2</div></div></foreignObject><text x="16" y="12" fill="#333333" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">core2</text></switch></g><path d="M 60 95 L 119.76 95" fill="none" stroke="#2098d3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 127.76 95 L 119.76 99 L 119.76 91 Z" fill="#2098d3" stroke="#2098d3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><rect x="0" y="85" width="60" height="20" rx="3" ry="3" fill="#2098d3" stroke="none" pointer-events="none"/><g transform="translate(7.5,88.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="44" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 46px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Primary</div></div></foreignObject><text x="22" y="12" fill="#FFFFFF" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">Primary</text></switch></g><path d="M 340 95 L 280.24 95" fill="none" stroke="#ff7800" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 272.24 95 L 280.24 91 L 280.24 99 Z" fill="#ff7800" stroke="#ff7800" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><rect x="340" y="85" width="80" height="20" rx="3" ry="3" fill="#ff7800" stroke="none" pointer-events="none"/><g transform="translate(348.5,88.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="62" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 62px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Secondary</div></div></foreignObject><text x="31" y="12" fill="#FFFFFF" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">Secondary</text></switch></g></svg>

You might think "Perfect, I have two links going to my IDF, I'm redundant, life is good." And you're not necessarily wrong, but there are a number of caveats:

* In a standard Layer 2 topology, that secondary link will sit idle unless the primary link goes down.
  - This is due to [Spanning-Tree](https://www.cisco.com/c/en/us/support/docs/lan-switching/spanning-tree-protocol/5234-5.html), a loop prevention protocol. If a VLAN (or broadcast domain) exists on all three of the switches in this topology, broadcast, multicast, and unknown unicast (aka BUM traffic) will endlessly loop around in a circle.
* Even when the primary link goes down, by default, the time to fail over to the backup path is about 30 seconds.
  - This is also due to Spanning-Tree rules.
  - This can be *reduced* by using more modern versions of Spanning-Tree such as RSTP or MST, but failover times are still not perfect, and properly configuring these protocols to fail over quickly and properly is complex, and sometimes difficult to predict.

Scale this problem up to 10 IDFs with 2 MDFs and you can imagine how complex and unpredictable things can be if not meticulously tuned to the nth degree.

Enter routed access layer. In a routed access layer design, SVIs/RVIs are created on the access switches, which act as the end user subnet default gateways, and routing protocols (typically OSPFv2/OSPFv3, IS-IS, or EIGRP) are used to advertise those networks into the rest of the network. With routed access layer topologies, any and all uplinks back to the core (or wherever) can be actively used, and failover can be subsecond (especially when combined with [BFD](https://www.nanog.org/meetings/nanog45/presentations/Monday/Scholl_BFD_N45.pdf)).

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="302px" viewBox="0 0 302 292" content="&lt;mxfile modified=&quot;2018-12-08T00:20:58.599Z&quot; host=&quot;www.draw.io&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_1) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/8.8.0 Chrome/61.0.3163.100 Electron/2.0.2 Safari/537.36&quot; etag=&quot;o-9p_EJDxeUYRpVRFD1e&quot; version=&quot;9.5.9&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;2UbHyQgh6Jzie4TEUn2E&quot; name=&quot;Page-1&quot;&gt;7Zpfc6I6FMA/jY86BAjqo9qluzO79/aOD7vuy04KEdIC8YZYdT/9JhCUCNJapbaz2pkCJ/8O5/zOSWLsWJN4fcvQIvxGfRx1TMNfd6ybjmn2HUf8l4KNEhhGLggY8XMR2Amm5DdWwqLakvg41SpySiNOFrrQo0mCPa7JEGN0pVeb00gfdYECXBFMPRRVpd+Jz0MlBcVryILPmAShGnoAVUGMispKkIbIp6uSyPrUsSaMUp7fxesJjqTtCrvk7dwDpVvFGE74SxqMbmf9X8n3DYxiD8M5+fz4H+raSje+KV6Y0WXiY9nG6FjjkMeRuAXiFq8J/yHFPaieZqrkAXO+Ua5DS06FiDIe0oAmKPpK6aLoIfFH0iXiMaEJziUuiSI1WMoZfdya2dxKJjSiLNPOMo3h4MbKWnK2KakjH2eqn6pllLFSumQebjCHqQhDLMC8oZ7qD/saPMrut5jGWKgjKjAcIU6edJaQQjLY1tt5Tdwoxx3hRKfiRKnYVD0qUz/rV1DyamHUZn+91O8VL1pj4JrjWo+37zvrXfkOnsV31Zhsio/W/Oq6/YFRH8mv96v1IWNS9fuEoqUaifhz0EWeh9O0IelKu65CwvF0gTKzrMS0qjt9LjxVMvocyr+KO5Rn5zTh5cjLPkpeUFYzlRTqY8bxutGcqtQeKpLVPA/7atpbabNmLgtLE6ZttOQBq+IBjzJsntX2k+xzadvDoaHZ3gbwDW3/uP750Ce/Deef1cx8YDGc3dfYvmM6EVfvrtnf+X9Ji4JumiWdkagAjMV6VyjuAnkFRg/0jJ5YtbiWUXQpHvJe8zqF+J7tS1469qBu6H+nd64oG/kPgo3E2xwx+h5wwqtcp6qeHh21bW5FEQkSIRNacCwKxxIUIlasI1UQE9+XY9WyrNO+R6ibfSqEWuOAIZ/gXV2l4gFQa3B+ObtDu8LusAZdq98Suk6b6A564lVc0z4a3XSBklejO6HxYilYSUvD5h22zOzNGDjSGRdg9nQybTjUyHRAdUarJbOtpNpvk8zhRcj8cidK7kIBz5XNo7ImBD34vugcHKTTJ0+1gEi/dZX1JSERnvMqIjpnChtR+zERGxjxHvd0ybP2jfgIcabGMeyulNmkbgllMYqe0+61ESiuKJY0JfepvHSzmjXzhYyCEwY5YKH6sWsyQnNgPhFUjJ+t0szzaH1ktJdDuxzyKgsU0Z7Bds5Y3w26t3byURpqjdTOGuy+qjptnjL0FZQFq5lgUJMJnLYyQZGJalLBaWHSA289SWy/bvyIk4Rt6lOEDavbQrMGDOC0BYbZFhjmFYxjVg9AzxgQVvdcbwuG3RYY8K3BuOA2/XQwHLi3Gb94xji8qjwRDOcKxjEZo//OMoZ5eI1x3W78ndsN5zxaX7cbz8wR5gW3Gw3nvnvnPKDiyY9/zrO/07v8Oc/hBf1ZznmMv/Cc50PvLOy95NDiaY543P12Kisr/QDN+vQH&lt;/diagram&gt;&lt;/mxfile&gt;" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://www.draw.io/?client=1&amp;lightbox=1&amp;edit=_blank');}}})(this);" style="cursor:pointer;max-width:100%;max-height:292px;"><defs/><path d="M 54.69 105.17 L 149.86 220.34" fill="none" stroke="#2098d3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 109.86 85.17 L 190 85.07" fill="none" stroke="#3b1f2b" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 245.03 105.17 L 149.86 220.34" fill="none" stroke="#ff7800" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><rect x="95" y="220" width="110" height="40" rx="6" ry="6" fill="#f5f5f5" stroke="none" pointer-events="none"/><g transform="translate(116.5,233.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="66" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; vertical-align: top; width: 66px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">idf1-access</div></div></foreignObject><text x="33" y="12" fill="#333333" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">idf1-access</text></switch></g><rect x="190" y="65" width="110" height="40" rx="6" ry="6" fill="#cccccc" stroke="none" pointer-events="none"/><g transform="translate(228.5,78.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="32" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; vertical-align: top; width: 34px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">core2</div></div></foreignObject><text x="16" y="12" fill="#333333" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">core2</text></switch></g><rect x="190" y="144" width="90" height="37" rx="5.55" ry="5.55" fill="#ff7800" stroke="none" pointer-events="none"/><g transform="translate(202.5,149.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="64" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 66px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font style="font-size: 10px">10.1.0.4/30</font><br /><font style="font-size: 8px">OSPF Adjacency</font><br /></div></div></foreignObject><text x="32" y="19" fill="#FFFFFF" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Not supported by viewer]</text></switch></g><rect x="59" y="260" width="90" height="30" rx="4.5" ry="4.5" fill="#db162f" stroke="none" pointer-events="none"/><g transform="translate(78.5,261.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="50" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 52px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font style="font-size: 10px">10.1.8.0/24</font><br /><span style="font-size: 8px">Computers</span><br /></div></div></foreignObject><text x="25" y="19" fill="#FFFFFF" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Not supported by viewer]</text></switch></g><rect x="151.5" y="260" width="90" height="30" rx="4.5" ry="4.5" fill="#db162f" stroke="none" pointer-events="none"/><g transform="translate(171.5,261.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="50" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 52px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font style="font-size: 10px">10.1.9.0/24</font><br /><span style="font-size: 8px">IP Phones</span><br /></div></div></foreignObject><text x="25" y="19" fill="#FFFFFF" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Not supported by viewer]</text></switch></g><rect x="0" y="0" width="80" height="60" rx="9" ry="9" fill="none" stroke="#db162f" stroke-dasharray="3 3" pointer-events="none"/><g transform="translate(2.5,6.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="64" height="46" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(219, 22, 47); line-height: 1.2; vertical-align: top; width: 65px; white-space: nowrap; word-wrap: normal; font-weight: bold;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div style="text-align: left"><span>I know about:</span></div><span style="font-weight: normal"><span style="font-size: 10px"> - 10.1.8.0/24<br style="font-size: 10px" /></span> - 10.1.9.0/24</span><br />via: 10.1.0.2<br style="font-size: 10px" /></div></div></foreignObject><text x="32" y="28" fill="#DB162F" text-anchor="middle" font-size="10px" font-family="Helvetica" font-weight="bold">[Not supported by viewer]</text></switch></g><rect x="25" y="105" width="20" height="16" rx="2.4" ry="2.4" fill="#2098d3" stroke="none" pointer-events="none"/><g transform="translate(30.5,106.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="8" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 10px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><span style="font-size: 10px">.1</span><br /></div></div></foreignObject><text x="4" y="12" fill="#FFFFFF" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Not supported by viewer]</text></switch></g><rect x="110" y="204" width="20" height="16" rx="2.4" ry="2.4" fill="#2098d3" stroke="none" pointer-events="none"/><g transform="translate(115.5,205.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="8" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 10px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><span style="font-size: 10px">.2</span><br /></div></div></foreignObject><text x="4" y="12" fill="#FFFFFF" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Not supported by viewer]</text></switch></g><rect x="250" y="105" width="20" height="16" rx="2.4" ry="2.4" fill="#ff7800" stroke="none" pointer-events="none"/><g transform="translate(255.5,106.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="8" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 10px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><span style="font-size: 10px">.5</span><br /></div></div></foreignObject><text x="4" y="12" fill="#FFFFFF" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Not supported by viewer]</text></switch></g><rect x="170" y="204" width="20" height="16" rx="2.4" ry="2.4" fill="#ff7800" stroke="none" pointer-events="none"/><g transform="translate(175.5,205.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="8" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 10px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><span style="font-size: 10px">.6</span><br /></div></div></foreignObject><text x="4" y="12" fill="#FFFFFF" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Not supported by viewer]</text></switch></g><rect x="220" y="0" width="80" height="60" rx="9" ry="9" fill="none" stroke="#db162f" stroke-dasharray="3 3" pointer-events="none"/><g transform="translate(222.5,6.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="64" height="46" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(219, 22, 47); line-height: 1.2; vertical-align: top; width: 65px; white-space: nowrap; word-wrap: normal; font-weight: bold;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div style="text-align: left"><span>I know about:</span></div><span style="font-weight: normal"><span style="font-size: 10px"> - 10.1.8.0/24<br style="font-size: 10px" /></span> - 10.1.9.0/24</span><br />via: 10.1.0.6<br style="font-size: 10px" /></div></div></foreignObject><text x="32" y="28" fill="#DB162F" text-anchor="middle" font-size="10px" font-family="Helvetica" font-weight="bold">[Not supported by viewer]</text></switch></g><rect x="0" y="65" width="110" height="40" rx="6" ry="6" fill="#cccccc" stroke="none" pointer-events="none"/><g transform="translate(38.5,78.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="32" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; vertical-align: top; width: 34px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">core1</div></div></foreignObject><text x="16" y="12" fill="#333333" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">core1</text></switch></g><rect x="20" y="144" width="90" height="37" rx="5.55" ry="5.55" fill="#2098d3" stroke="none" pointer-events="none"/><g transform="translate(32.5,149.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="64" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 66px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font style="font-size: 10px">10.1.0.0/30</font><br /><font style="font-size: 8px">OSPF Adjacency</font><br /></div></div></foreignObject><text x="32" y="19" fill="#FFFFFF" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Not supported by viewer]</text></switch></g></svg>

Routed access layer topologies are the most flexible, most redundant, and easiest to scale.

In a 10 IDF, 2 MDF topology, we can easily scale this design to include an allocated /21 IPv4 address assigned per IDF (enough for future growth):

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1011px" viewBox="0 0 1011 634" content="&lt;mxfile modified=&quot;2018-12-08T00:39:20.902Z&quot; host=&quot;www.draw.io&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_1) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/8.8.0 Chrome/61.0.3163.100 Electron/2.0.2 Safari/537.36&quot; etag=&quot;OiCQldwALaQlVoOe2erR&quot; version=&quot;9.5.9&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;jGCiS9JCf1lwzXue48fy&quot; name=&quot;Page-1&quot;&gt;7Z1tc6I6FMc/jS/XSQhPvqztug+ze6dz25l792UKQdlF4mBc2/30N0BQQ9B1r9BEir6oHBMJ5/cPOZyDdoRul88fMrxafKUhSUYWCJ9H6G5kWdC2fP4nt7yUFt8BpWGexaFotDc8xL+IMFbNNnFI1lJDRmnC4pVsDGiakoBJNpxldCs3i2gi73WF50QxPAQ4Ua3/xCFbCCsEYP/GRxLPF6x2fEtcNRaG9QKHdHtgQu9H6DajlJWvls+3JMmdV/ml7Dc78u5uYBlJ2TkdUIaDR/+TA/6KKL35evP4efr9Xd6hGBx7qY44o5s0JHknMELTBVsm/CXkL8lzzP7NzWNHbH0Tjb4Txl4EO7xhlJtoxhZ0TlOcfKF0VX1CGt7kTPhmSlNSWmZxkojPWbOM/tj52dpZbmlCs2J0yAIT/w4VPVn2cjCcfPOb2E95TCRU0O59JUxruskCcsJBleZwNifsRDtvR5RPBUKXhA+H98tIgln8Ux4HFpqc79rtsfEXgtyfUEQKxfzgH8Sm8PX/AHvKyb+Dea4ojiNW5aABrK8VrD2A7QrsRCtYZwDbFVgItJJ1B7KdkYVayXodkNVF75iagCay1oVkRdd7GvMhWkBcf6CJCL7F1YfjA/kjyoGJXjV97IZxgWT8ziRzHN9bORkgrSeDyUC2M7K2TrIIDGQ7I+toJQsHsp2RdXWStdtJgMADrmBsORJaCWz1Zkds0ROMrCdT2Go9HdvtpEBktN4ptN6A9pXQtpQEkdBKZKFM9g2BhVrTW+Jzf+JkI/YU0Iyoy++ebe7S7SJm5GGFCwdsM7ySeUcc0oG/b4uHQkJAjWjKDuEUD2GvBFaNkmSMPJ8mozpSdLAhkq4wbSBEvZWqRaVtcVAoskFHvkdqSeeKE1BR5PmguTbU4qyyz5xVWqs8qFfFALPAaq3yoF4VA8wCq3UZRL2qBZgFVm+VB3VRCxjIGlDlQd2l7DuiN5sdpfdKVZ6zyV6aJGqu8nh2rcrjvm6VB/WqFnBCTjokozVjbPeqFmAYWb25p17VAgwjq7Uya3eR/xjItnObxmVk27mckksBpyoBPcgXn0vW0no5JUZZyxerE/n688WO50uxqv58MfQU5396uOeGG3W2JUm8WufuWi/wKjcGCd2Ef4ZCOFyZD6B4dODyqswkPI78Bo9bDR6v3yvWnsf9Ix6fGuFxvs13+nF0+F2KiwBMkGkE7JbSNw0ryeuvFgdxie/Jkcl+dbsnWcx9R7JR+/d4Ts6NHrSWT6phHsy6KM7IFicJxK2uND7In6dWGmmyySvPrHi0M/F23z0zZrGx28muNYVwb2/iVXR/P/EuLW81590mtbyb/dp3V4PjM/qpnzPa80yb0Wr0GIcRfIeDgKzXrUKInPypO4Cvn1Nh5VltBNRokhOw+ksAOb5hBNTIghNA/SVgTxzDCEB1KeAI7P4icBEyDYF60x9H4PQXQX0tNgCB1YTA7S+C+mLsetoRoCYEXn8R1FdjAxCo2WSOwO8vgvpybAACpwnBpL8I6suxAQjcJgQQ9JdBfT3Wz8BRFwMIxnDsj/keZ7s8zx4CP3gme7rZo7L776bQzcc5xUk8T7kt4B7LE07T3J9xgJMb8cYyDsN8X418ZQXUkxoJfiLJFAc/5kW704x3KY8130Wczr+QKPc12FumlDG6lG1/CyQHpsciMXdgEFvF6MpsHixyhDSLf3EbrvzWRnCBvHHtOgeqivIcVVDVr7u0Lyj1vFoICrqDoq5AUchzjFOUukwUirLsQVFXoCgHWsYpSs0IF4pC1qCoK1CU6wDjFKVmuAtF2WBQ1BUoyqv9CJN+Pan5+lJPQ1x+DXpS43IP7iy6NFV95aSuKWeIzK9BU2pkboKm1IpKoSl3iM2vQVNqbG6CptQSUaEpb4jOr0FTanRugqaOpTmH+PwaNFWPzztVFN/c/8uD8kbA/T+OQO//Aw==&lt;/diagram&gt;&lt;/mxfile&gt;" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://www.draw.io/?client=1&amp;lightbox=1&amp;edit=_blank');}}})(this);" style="cursor:pointer;max-width:100%;max-height:634px;"><defs/><path d="M 422.86 295.17 L 229.76 70.34" fill="none" stroke="#2098d3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 422.86 295.17 L 367.69 70.34" fill="none" stroke="#2098d3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 422.86 295.17 L 504.93 70.34" fill="none" stroke="#2098d3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 422.86 295.17 L 642.86 70.34" fill="none" stroke="#2098d3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 422.86 295.17 L 780.1 70.34" fill="none" stroke="#2098d3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 422.86 335.17 L 229.76 560" fill="none" stroke="#2098d3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 422.86 335.17 L 367.69 560" fill="none" stroke="#2098d3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 422.86 335.17 L 504.93 560" fill="none" stroke="#2098d3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 422.86 335.17 L 642.86 560" fill="none" stroke="#2098d3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 422.86 335.17 L 780.1 560" fill="none" stroke="#2098d3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 478.03 304.83 L 533.21 304.83" fill="none" stroke="#3b1f2b" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 478.03 324.83 L 533.21 324.83" fill="none" stroke="#3b1f2b" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 367.69 315.17 L 284.93 315.17" fill="none" stroke="#3b1f2b" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><rect x="368" y="295" width="110" height="40" rx="6" ry="6" fill="#cccccc" stroke="none" pointer-events="none"/><g transform="translate(406.5,308.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="32" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; vertical-align: top; width: 34px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">core1</div></div></foreignObject><text x="16" y="12" fill="#333333" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">core1</text></switch></g><path d="M 587.69 295.17 L 229.76 70.34" fill="none" stroke="#ff7800" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 587.69 295.17 L 367.69 70.34" fill="none" stroke="#ff7800" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 587.69 295.17 L 504.93 70.34" fill="none" stroke="#ff7800" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 587.69 295.17 L 642.86 70.34" fill="none" stroke="#ff7800" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 587.69 295.17 L 780.1 70.34" fill="none" stroke="#ff7800" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 587.69 335.17 L 780.1 560" fill="none" stroke="#ff7800" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 587.69 335.17 L 642.86 560" fill="none" stroke="#ff7800" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 587.69 335.17 L 504.93 560" fill="none" stroke="#ff7800" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 587.69 335.17 L 367.69 560" fill="none" stroke="#ff7800" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 587.69 335.17 L 229.76 560" fill="none" stroke="#ff7800" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 642.86 315.17 L 724.93 315.17" fill="none" stroke="#3b1f2b" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><rect x="533" y="295" width="110" height="40" rx="6" ry="6" fill="#cccccc" stroke="none" pointer-events="none"/><g transform="translate(571.5,308.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="32" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; vertical-align: top; width: 34px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">core2</div></div></foreignObject><text x="16" y="12" fill="#333333" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">core2</text></switch></g><path d="M 30 295 C 6 295 0 315 19.2 319 C 0 327.8 21.6 347 37.2 339 C 48 355 84 355 96 339 C 120 339 120 323 105 315 C 120 299 96 283 75 291 C 60 279 36 279 30 295 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(44.5,308.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="31" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 33px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">ISP A</div></div></foreignObject><text x="16" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">ISP A</text></switch></g><path d="M 920 295 C 896 295 890 315 909.2 319 C 890 327.8 911.6 347 927.2 339 C 938 355 974 355 986 339 C 1010 339 1010 323 995 315 C 1010 299 986 283 965 291 C 950 279 926 279 920 295 Z" fill="none" stroke="#000000" stroke-miterlimit="10" transform="translate(950,0)scale(-1,1)translate(-950,0)" pointer-events="none"/><g transform="translate(934.5,308.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="31" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 33px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">ISP B</div></div></foreignObject><text x="16" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">ISP B</text></switch></g><path d="M 175.28 315.17 L 104.93 315.17" fill="none" stroke="#3b1f2b" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><rect x="175" y="295" width="110" height="40" rx="6" ry="6" fill="#808080" stroke="none" pointer-events="none"/><g transform="translate(202.5,308.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="54" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 56px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">firewall1a</div></div></foreignObject><text x="27" y="12" fill="#FFFFFF" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">firewall1a</text></switch></g><path d="M 835.28 315.17 L 904.93 315.17" fill="none" stroke="#3b1f2b" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><rect x="725" y="295" width="110" height="40" rx="6" ry="6" fill="#808080" stroke="none" pointer-events="none"/><g transform="translate(751.5,308.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="56" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 56px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">firewall1b</div></div></foreignObject><text x="28" y="12" fill="#FFFFFF" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">firewall1b</text></switch></g><rect x="175" y="30" width="110" height="40" rx="6" ry="6" fill="#f5f5f5" stroke="none" pointer-events="none"/><g transform="translate(196.5,43.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="66" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; vertical-align: top; width: 66px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">idf1-access</div></div></foreignObject><text x="33" y="12" fill="#333333" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">idf1-access</text></switch></g><rect x="313" y="30" width="110" height="40" rx="6" ry="6" fill="#f5f5f5" stroke="none" pointer-events="none"/><g transform="translate(334.5,43.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="66" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; vertical-align: top; width: 66px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">idf2-access</div></div></foreignObject><text x="33" y="12" fill="#333333" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">idf2-access</text></switch></g><rect x="450" y="30" width="110" height="40" rx="6" ry="6" fill="#f5f5f5" stroke="none" pointer-events="none"/><g transform="translate(471.5,43.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="66" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; vertical-align: top; width: 66px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">idf3-access</div></div></foreignObject><text x="33" y="12" fill="#333333" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">idf3-access</text></switch></g><rect x="588" y="30" width="110" height="40" rx="6" ry="6" fill="#f5f5f5" stroke="none" pointer-events="none"/><g transform="translate(609.5,43.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="66" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; vertical-align: top; width: 66px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">idf4-access</div></div></foreignObject><text x="33" y="12" fill="#333333" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">idf4-access</text></switch></g><rect x="725" y="30" width="110" height="40" rx="6" ry="6" fill="#f5f5f5" stroke="none" pointer-events="none"/><g transform="translate(746.5,43.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="66" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; vertical-align: top; width: 66px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">idf5-access</div></div></foreignObject><text x="33" y="12" fill="#333333" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">idf5-access</text></switch></g><rect x="175" y="560" width="110" height="40" rx="6" ry="6" fill="#f5f5f5" stroke="none" pointer-events="none"/><g transform="translate(196.5,573.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="66" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; vertical-align: top; width: 66px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">idf6-access</div></div></foreignObject><text x="33" y="12" fill="#333333" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">idf6-access</text></switch></g><rect x="313" y="560" width="110" height="40" rx="6" ry="6" fill="#f5f5f5" stroke="none" pointer-events="none"/><g transform="translate(334.5,573.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="66" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; vertical-align: top; width: 66px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">idf7-access</div></div></foreignObject><text x="33" y="12" fill="#333333" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">idf7-access</text></switch></g><rect x="450" y="560" width="110" height="40" rx="6" ry="6" fill="#f5f5f5" stroke="none" pointer-events="none"/><g transform="translate(471.5,573.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="66" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; vertical-align: top; width: 66px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">idf8-access</div></div></foreignObject><text x="33" y="12" fill="#333333" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">idf8-access</text></switch></g><rect x="588" y="560" width="110" height="40" rx="6" ry="6" fill="#f5f5f5" stroke="none" pointer-events="none"/><g transform="translate(609.5,573.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="66" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; vertical-align: top; width: 66px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">idf9-access</div></div></foreignObject><text x="33" y="12" fill="#333333" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">idf9-access</text></switch></g><rect x="725" y="560" width="110" height="40" rx="6" ry="6" fill="#f5f5f5" stroke="none" pointer-events="none"/><g transform="translate(743.5,573.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="72" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; vertical-align: top; width: 74px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">idf10-access</div></div></foreignObject><text x="36" y="12" fill="#333333" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">idf10-access</text></switch></g><rect x="192.5" y="0" width="75" height="25" rx="3.75" ry="3.75" fill="#db162f" stroke="none" pointer-events="none"/><g transform="translate(204.5,7.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="51" height="10" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 51px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">10.1.8.0/21</div></div></foreignObject><text x="26" y="10" fill="#FFFFFF" text-anchor="middle" font-size="10px" font-family="Helvetica" font-weight="bold">10.1.8.0/21</text></switch></g><rect x="330.5" y="0" width="75" height="25" rx="3.75" ry="3.75" fill="#db162f" stroke="none" pointer-events="none"/><g transform="translate(340.5,7.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="55" height="10" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 57px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">10.1.16.0/21</div></div></foreignObject><text x="28" y="10" fill="#FFFFFF" text-anchor="middle" font-size="10px" font-family="Helvetica" font-weight="bold">10.1.16.0/21</text></switch></g><rect x="467.5" y="0" width="75" height="25" rx="3.75" ry="3.75" fill="#db162f" stroke="none" pointer-events="none"/><g transform="translate(477.5,7.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="55" height="10" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 57px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">10.1.24.0/21</div></div></foreignObject><text x="28" y="10" fill="#FFFFFF" text-anchor="middle" font-size="10px" font-family="Helvetica" font-weight="bold">10.1.24.0/21</text></switch></g><rect x="605.5" y="0" width="75" height="25" rx="3.75" ry="3.75" fill="#db162f" stroke="none" pointer-events="none"/><g transform="translate(615.5,7.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="55" height="10" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 57px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">10.1.32.0/21</div></div></foreignObject><text x="28" y="10" fill="#FFFFFF" text-anchor="middle" font-size="10px" font-family="Helvetica" font-weight="bold">10.1.32.0/21</text></switch></g><rect x="745" y="0" width="75" height="25" rx="3.75" ry="3.75" fill="#db162f" stroke="none" pointer-events="none"/><g transform="translate(754.5,7.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="55" height="10" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 57px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">10.1.40.0/21</div></div></foreignObject><text x="28" y="10" fill="#FFFFFF" text-anchor="middle" font-size="10px" font-family="Helvetica" font-weight="bold">10.1.40.0/21</text></switch></g><rect x="192.5" y="607.5" width="75" height="25" rx="3.75" ry="3.75" fill="#db162f" stroke="none" pointer-events="none"/><g transform="translate(202.5,614.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="55" height="10" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 57px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">10.1.48.0/21</div></div></foreignObject><text x="28" y="10" fill="#FFFFFF" text-anchor="middle" font-size="10px" font-family="Helvetica" font-weight="bold">10.1.48.0/21</text></switch></g><rect x="330.5" y="607.5" width="75" height="25" rx="3.75" ry="3.75" fill="#db162f" stroke="none" pointer-events="none"/><g transform="translate(340.5,614.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="55" height="10" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 57px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">10.1.56.0/21</div></div></foreignObject><text x="28" y="10" fill="#FFFFFF" text-anchor="middle" font-size="10px" font-family="Helvetica" font-weight="bold">10.1.56.0/21</text></switch></g><rect x="467.5" y="607.5" width="75" height="25" rx="3.75" ry="3.75" fill="#db162f" stroke="none" pointer-events="none"/><g transform="translate(477.5,614.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="55" height="10" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 57px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">10.1.64.0/21</div></div></foreignObject><text x="28" y="10" fill="#FFFFFF" text-anchor="middle" font-size="10px" font-family="Helvetica" font-weight="bold">10.1.64.0/21</text></switch></g><rect x="605.5" y="607.5" width="75" height="25" rx="3.75" ry="3.75" fill="#db162f" stroke="none" pointer-events="none"/><g transform="translate(615.5,614.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="55" height="10" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 57px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">10.1.72.0/21</div></div></foreignObject><text x="28" y="10" fill="#FFFFFF" text-anchor="middle" font-size="10px" font-family="Helvetica" font-weight="bold">10.1.72.0/21</text></switch></g><rect x="745" y="607.5" width="75" height="25" rx="3.75" ry="3.75" fill="#db162f" stroke="none" pointer-events="none"/><g transform="translate(754.5,614.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="55" height="10" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; width: 57px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">10.1.80.0/21</div></div></foreignObject><text x="28" y="10" fill="#FFFFFF" text-anchor="middle" font-size="10px" font-family="Helvetica" font-weight="bold">10.1.80.0/21</text></switch></g></svg>

Each IDF is assigned a /21 in IPv4 LAN address space, which can be subdivided up as needed. For example:

|Location|VLAN ID|Subnet      |Function  |
|--------|-------|------------|----------|
|IDF1    |10     |10.1.8.0/24 |Data      |
|IDF1    |20     |10.1.9.0/24 |Voice     |
|IDF1    |30     |10.1.10.0/24|Operations|
|IDF1    |40     |10.1.11.0/24|Guest     |
|IDF2    |10     |10.1.16.0/24|Data      |
|IDF2    |20     |10.1.17.0/24|Voice     |
|IDF2    |30     |10.1.18.0/24|Operations|
|IDF2    |40     |10.1.19.0/24|Guest     |

Notice that the VLAN IDs are the same. This is because the VLANs (broadcast domains) don't ever leave this switch, so they can be reused. This makes for easy templating and configuration standardization, as well as removes the headache of trying to match up VLAN IDs with subnet IDs. 

In this topology, any one of these links can be brought down without impacting connectivity for anything on the network. Configuration and operational processes are minimal, and most access switching vendors don't charge extra for these features (or if they do, it's generally negligible).

Most enterprise firewalls are capable of "active/active" high availability, which is when two firewalls syncronize their policies, session tables, and generally mirror eachother in the network topology to achieve near-hitless failover when outages or routing changes occur. 

Even as enterprises begin moving compute/storage workloads to the cloud, fast, reliable network connectivity at the campus is just as important as ever. In the above design, each core switch and firewall node could exist in physically diverse MDFs, with diverse network service providers, to achieve a truly redundant campus network.
